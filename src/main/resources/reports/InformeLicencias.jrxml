
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="ConstanciaLicencia"
              pageWidth="842" pageHeight="595" orientation="Landscape"
              whenNoDataType="NoPages"
              columnCount="2" columnSpacing="10"
              leftMargin="20" rightMargin="20" topMargin="15" bottomMargin="15">
    
    <!-- ====== PARaMETROS ====== -->
    <parameter name="id" class="java.lang.Object"/>
    <parameter name="empleadoNombre" class="java.lang.String"/>
    <parameter name="legajo" class="java.lang.Object"/>
    <parameter name="tipo" class="java.lang.String"/>
    <parameter name="startDate" class="java.util.Date"/>
    <parameter name="endDate" class="java.util.Date"/>
    <parameter name="dias" class="java.lang.Integer"/>
    <parameter name="justificada" class="java.lang.Boolean"/>
    <parameter name="observaciones" class="java.lang.String"/>
    <parameter name="anio" class="java.lang.String"/>

    <!-- ====== ESTILOS ====== -->
    <style name="base" fontName="SansSerif" fontSize="10"/>
    <style name="label" style="base" isBold="true"/>
    <style name="text" style="base"/>
    <style name="title" style="base" fontSize="14" isBold="true"/>
    <style name="box" mode="Opaque" backcolor="#FFFFFF"/>

    <!-- ====== VARIABLES ====== -->
    <variable name="EsOriginal" class="java.lang.Boolean" resetType="Report" calculation="Nothing">
      <variableExpression><![CDATA[$V{COLUMN_NUMBER}.intValue() == 1]]></variableExpression>
    </variable>

    <title>
        <band height="1"/>
    </title>

    <detail>
      <band height="520" splitType="Prevent">
        <!-- Marco exterior del formulario -->
        <frame x="0" y="0" width="396" height="520" style="box">
          <!-- Encabezado -->
          <staticText>
            <reportElement x="10" y="10" width="280" height="22" style="title"/>
            <text><![CDATA[Constancia de Licencia]]></text>
          </staticText>

          <!-- ORIGINAL / DUPLICADO -->
          <textField>
            <reportElement x="300" y="10" width="86" height="18"/>
            <box>
              <topPen lineWidth="0.75"/>
              <leftPen lineWidth="0.75"/>
              <bottomPen lineWidth="0.75"/>
              <rightPen lineWidth="0.75"/>
            </box>
            <textElement textAlignment="Center" verticalAlignment="Middle">
              <font isBold="true"/>
            </textElement>
            <textFieldExpression><![CDATA[$V{EsOriginal} ? "ORIGINAL" : "DUPLICADO"]]></textFieldExpression>
          </textField>

          <!-- Datos de empleado -->
          <staticText>
            <reportElement x="10" y="45" width="80" height="16" style="label"/>
            <text><![CDATA[Empleado]]></text>
          </staticText>
          <textField>
            <reportElement x="95" y="45" width="291" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{empleadoNombre}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="10" y="66" width="80" height="16" style="label"/>
            <text><![CDATA[Legajo]]></text>
          </staticText>
          <textField>
            <reportElement x="95" y="66" width="120" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{legajo}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="220" y="66" width="60" height="16" style="label"/>
            <text><![CDATA[A�o]]></text>
          </staticText>
          <textField>
            <reportElement x="285" y="66" width="101" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{anio}]]></textFieldExpression>
          </textField>

          <line>
            <reportElement x="10" y="88" width="376" height="1"/>
          </line>

          <!-- Datos de la licencia -->
          <staticText>
            <reportElement x="10" y="100" width="100" height="16" style="label"/>
            <text><![CDATA[Tipo de licencia]]></text>
          </staticText>
          <textField>
            <reportElement x="115" y="100" width="271" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{tipo}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="10" y="122" width="60" height="16" style="label"/>
            <text><![CDATA[Desde]]></text>
          </staticText>
          <textField pattern="dd/MM/yyyy">
            <reportElement x="75" y="122" width="90" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{startDate}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="180" y="122" width="50" height="16" style="label"/>
            <text><![CDATA[Hasta]]></text>
          </staticText>
          <textField pattern="dd/MM/yyyy">
            <reportElement x="235" y="122" width="90" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{endDate}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="335" y="122" width="40" height="16" style="label"/>
            <text><![CDATA[D�as]]></text>
          </staticText>
          <textField>
            <reportElement x="335" y="139" width="40" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{dias}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="10" y="144" width="90" height="16" style="label"/>
            <text><![CDATA[Justificada]]></text>
          </staticText>
          <textField>
            <reportElement x="105" y="144" width="120" height="16" style="text"/>
            <textFieldExpression><![CDATA[$P{justificada} != null && $P{justificada} ? "S�" : "No"]]></textFieldExpression>
          </textField>

          <!-- Observaciones -->
          <staticText>
            <reportElement x="10" y="170" width="100" height="16" style="label"/>
            <text><![CDATA[Observaciones]]></text>
          </staticText>
          <rectangle>
            <reportElement x="10" y="188" width="366" height="120"/>
          </rectangle>
          <textField isStretchWithOverflow="true">
            <reportElement x="14" y="192" width="358" height="112" style="text"/>
            <textFieldExpression><![CDATA[$P{observaciones}]]></textFieldExpression>
          </textField>

          <!-- Firmas -->
          <line>
            <reportElement x="25" y="360" width="150" height="1"/>
          </line>
          <staticText>
            <reportElement x="25" y="364" width="150" height="14" style="text"/>
            <text><![CDATA[Firma del Empleado]]></text>
          </staticText>

          <line>
            <reportElement x="220" y="360" width="150" height="1"/>
          </line>
          <staticText>
            <reportElement x="220" y="364" width="150" height="14" style="text"/>
            <text><![CDATA[Firma y Sello de RR.HH.]]></text>
          </staticText>

          <!-- Pie con id y fecha de emisi�n -->
          <staticText>
            <reportElement x="10" y="392" width="90" height="14" style="label"/>
            <text><![CDATA[ID Licencia]]></text>
          </staticText>
          <textField>
            <reportElement x="100" y="392" width="120" height="14" style="text"/>
            <textFieldExpression><![CDATA[$P{id}]]></textFieldExpression>
          </textField>

          <staticText>
            <reportElement x="230" y="392" width="100" height="14" style="label"/>
            <text><![CDATA[Fecha emisi�n]]></text>
          </staticText>
          <textField pattern="dd/MM/yyyy HH:mm">
            <reportElement x="330" y="392" width="100" height="14" style="text"/>
            <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
          </textField>
        </frame>
      </band>
    </detail>

    <pageFooter>
      <band height="15">
        <textField>
          <reportElement x="0" y="0" width="200" height="12" style="text"/>
          <textFieldExpression><![CDATA["P�gina " + $V{PAGE_NUMBER}]]></textFieldExpression>
        </textField>
      </band>
    </pageFooter>

</jasperReport>
